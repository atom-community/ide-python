// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

class OnTypeFormattingDispatcher {
  constructor(providers) {
    this.providers = providers;
  }

  provideOnTypeFormattingEdits(document, position, ch, options, cancellationToken) {
    const provider = this.providers[ch];

    if (provider) {
      return provider.provideOnTypeFormattingEdits(document, position, ch, options, cancellationToken);
    }

    return [];
  }

  getTriggerCharacters() {
    const keys = Object.keys(this.providers);
    keys.sort(); // Make output deterministic

    const first = keys.shift();

    if (first) {
      return {
        first: first,
        more: keys
      };
    }

    return undefined;
  }

}

exports.OnTypeFormattingDispatcher = OnTypeFormattingDispatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BhdGNoZXIuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJPblR5cGVGb3JtYXR0aW5nRGlzcGF0Y2hlciIsImNvbnN0cnVjdG9yIiwicHJvdmlkZXJzIiwicHJvdmlkZU9uVHlwZUZvcm1hdHRpbmdFZGl0cyIsImRvY3VtZW50IiwicG9zaXRpb24iLCJjaCIsIm9wdGlvbnMiLCJjYW5jZWxsYXRpb25Ub2tlbiIsInByb3ZpZGVyIiwiZ2V0VHJpZ2dlckNoYXJhY3RlcnMiLCJrZXlzIiwic29ydCIsImZpcnN0Iiwic2hpZnQiLCJtb3JlIiwidW5kZWZpbmVkIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBQ0FBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRUMsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBN0M7O0FBQ0EsTUFBTUMsMEJBQU4sQ0FBaUM7QUFDN0JDLEVBQUFBLFdBQVcsQ0FBQ0MsU0FBRCxFQUFZO0FBQ25CLFNBQUtBLFNBQUwsR0FBaUJBLFNBQWpCO0FBQ0g7O0FBQ0RDLEVBQUFBLDRCQUE0QixDQUFDQyxRQUFELEVBQVdDLFFBQVgsRUFBcUJDLEVBQXJCLEVBQXlCQyxPQUF6QixFQUFrQ0MsaUJBQWxDLEVBQXFEO0FBQzdFLFVBQU1DLFFBQVEsR0FBRyxLQUFLUCxTQUFMLENBQWVJLEVBQWYsQ0FBakI7O0FBQ0EsUUFBSUcsUUFBSixFQUFjO0FBQ1YsYUFBT0EsUUFBUSxDQUFDTiw0QkFBVCxDQUFzQ0MsUUFBdEMsRUFBZ0RDLFFBQWhELEVBQTBEQyxFQUExRCxFQUE4REMsT0FBOUQsRUFBdUVDLGlCQUF2RSxDQUFQO0FBQ0g7O0FBQ0QsV0FBTyxFQUFQO0FBQ0g7O0FBQ0RFLEVBQUFBLG9CQUFvQixHQUFHO0FBQ25CLFVBQU1DLElBQUksR0FBR2YsTUFBTSxDQUFDZSxJQUFQLENBQVksS0FBS1QsU0FBakIsQ0FBYjtBQUNBUyxJQUFBQSxJQUFJLENBQUNDLElBQUwsR0FGbUIsQ0FFTjs7QUFDYixVQUFNQyxLQUFLLEdBQUdGLElBQUksQ0FBQ0csS0FBTCxFQUFkOztBQUNBLFFBQUlELEtBQUosRUFBVztBQUNQLGFBQU87QUFDSEEsUUFBQUEsS0FBSyxFQUFFQSxLQURKO0FBRUhFLFFBQUFBLElBQUksRUFBRUo7QUFGSCxPQUFQO0FBSUg7O0FBQ0QsV0FBT0ssU0FBUDtBQUNIOztBQXRCNEI7O0FBd0JqQ2xCLE9BQU8sQ0FBQ0UsMEJBQVIsR0FBcUNBLDBCQUFyQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuJ3VzZSBzdHJpY3QnO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY2xhc3MgT25UeXBlRm9ybWF0dGluZ0Rpc3BhdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVycykge1xuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IHByb3ZpZGVycztcbiAgICB9XG4gICAgcHJvdmlkZU9uVHlwZUZvcm1hdHRpbmdFZGl0cyhkb2N1bWVudCwgcG9zaXRpb24sIGNoLCBvcHRpb25zLCBjYW5jZWxsYXRpb25Ub2tlbikge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucHJvdmlkZXJzW2NoXTtcbiAgICAgICAgaWYgKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIucHJvdmlkZU9uVHlwZUZvcm1hdHRpbmdFZGl0cyhkb2N1bWVudCwgcG9zaXRpb24sIGNoLCBvcHRpb25zLCBjYW5jZWxsYXRpb25Ub2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBnZXRUcmlnZ2VyQ2hhcmFjdGVycygpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMucHJvdmlkZXJzKTtcbiAgICAgICAga2V5cy5zb3J0KCk7IC8vIE1ha2Ugb3V0cHV0IGRldGVybWluaXN0aWNcbiAgICAgICAgY29uc3QgZmlyc3QgPSBrZXlzLnNoaWZ0KCk7XG4gICAgICAgIGlmIChmaXJzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaXJzdDogZmlyc3QsXG4gICAgICAgICAgICAgICAgbW9yZToga2V5c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmV4cG9ydHMuT25UeXBlRm9ybWF0dGluZ0Rpc3BhdGNoZXIgPSBPblR5cGVGb3JtYXR0aW5nRGlzcGF0Y2hlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoZXIuanMubWFwIl19