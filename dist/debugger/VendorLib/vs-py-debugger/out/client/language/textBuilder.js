"use strict"; // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

Object.defineProperty(exports, "__esModule", {
  value: true
});

const characters_1 = require("./characters"); // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.


class TextBuilder {
  constructor() {
    this.segments = [];
  }

  getText() {
    if (this.isLastWhiteSpace()) {
      this.segments.pop();
    }

    return this.segments.join('');
  }

  softAppendSpace(count = 1) {
    if (this.segments.length === 0) {
      return;
    }

    if (this.isLastWhiteSpace()) {
      count = count - 1;
    }

    for (let i = 0; i < count; i += 1) {
      this.segments.push(' ');
    }
  }

  append(text) {
    this.segments.push(text);
  }

  isLastWhiteSpace() {
    return this.segments.length > 0 && this.isWhitespace(this.segments[this.segments.length - 1]);
  }

  isWhitespace(s) {
    for (let i = 0; i < s.length; i += 1) {
      if (!characters_1.isWhiteSpace(s.charCodeAt(i))) {
        return false;
      }
    }

    return true;
  }

}

exports.TextBuilder = TextBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHRCdWlsZGVyLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY2hhcmFjdGVyc18xIiwicmVxdWlyZSIsIlRleHRCdWlsZGVyIiwiY29uc3RydWN0b3IiLCJzZWdtZW50cyIsImdldFRleHQiLCJpc0xhc3RXaGl0ZVNwYWNlIiwicG9wIiwiam9pbiIsInNvZnRBcHBlbmRTcGFjZSIsImNvdW50IiwibGVuZ3RoIiwiaSIsInB1c2giLCJhcHBlbmQiLCJ0ZXh0IiwiaXNXaGl0ZXNwYWNlIiwicyIsImlzV2hpdGVTcGFjZSIsImNoYXJDb2RlQXQiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDQTtBQUNBOztBQUNBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQUVDLEVBQUFBLEtBQUssRUFBRTtBQUFULENBQTdDOztBQUNBLE1BQU1DLFlBQVksR0FBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBNUIsQyxDQUNBO0FBQ0E7OztBQUNBLE1BQU1DLFdBQU4sQ0FBa0I7QUFDZEMsRUFBQUEsV0FBVyxHQUFHO0FBQ1YsU0FBS0MsUUFBTCxHQUFnQixFQUFoQjtBQUNIOztBQUNEQyxFQUFBQSxPQUFPLEdBQUc7QUFDTixRQUFJLEtBQUtDLGdCQUFMLEVBQUosRUFBNkI7QUFDekIsV0FBS0YsUUFBTCxDQUFjRyxHQUFkO0FBQ0g7O0FBQ0QsV0FBTyxLQUFLSCxRQUFMLENBQWNJLElBQWQsQ0FBbUIsRUFBbkIsQ0FBUDtBQUNIOztBQUNEQyxFQUFBQSxlQUFlLENBQUNDLEtBQUssR0FBRyxDQUFULEVBQVk7QUFDdkIsUUFBSSxLQUFLTixRQUFMLENBQWNPLE1BQWQsS0FBeUIsQ0FBN0IsRUFBZ0M7QUFDNUI7QUFDSDs7QUFDRCxRQUFJLEtBQUtMLGdCQUFMLEVBQUosRUFBNkI7QUFDekJJLE1BQUFBLEtBQUssR0FBR0EsS0FBSyxHQUFHLENBQWhCO0FBQ0g7O0FBQ0QsU0FBSyxJQUFJRSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixLQUFwQixFQUEyQkUsQ0FBQyxJQUFJLENBQWhDLEVBQW1DO0FBQy9CLFdBQUtSLFFBQUwsQ0FBY1MsSUFBZCxDQUFtQixHQUFuQjtBQUNIO0FBQ0o7O0FBQ0RDLEVBQUFBLE1BQU0sQ0FBQ0MsSUFBRCxFQUFPO0FBQ1QsU0FBS1gsUUFBTCxDQUFjUyxJQUFkLENBQW1CRSxJQUFuQjtBQUNIOztBQUNEVCxFQUFBQSxnQkFBZ0IsR0FBRztBQUNmLFdBQU8sS0FBS0YsUUFBTCxDQUFjTyxNQUFkLEdBQXVCLENBQXZCLElBQTRCLEtBQUtLLFlBQUwsQ0FBa0IsS0FBS1osUUFBTCxDQUFjLEtBQUtBLFFBQUwsQ0FBY08sTUFBZCxHQUF1QixDQUFyQyxDQUFsQixDQUFuQztBQUNIOztBQUNESyxFQUFBQSxZQUFZLENBQUNDLENBQUQsRUFBSTtBQUNaLFNBQUssSUFBSUwsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0ssQ0FBQyxDQUFDTixNQUF0QixFQUE4QkMsQ0FBQyxJQUFJLENBQW5DLEVBQXNDO0FBQ2xDLFVBQUksQ0FBQ1osWUFBWSxDQUFDa0IsWUFBYixDQUEwQkQsQ0FBQyxDQUFDRSxVQUFGLENBQWFQLENBQWIsQ0FBMUIsQ0FBTCxFQUFpRDtBQUM3QyxlQUFPLEtBQVA7QUFDSDtBQUNKOztBQUNELFdBQU8sSUFBUDtBQUNIOztBQWxDYTs7QUFvQ2xCZCxPQUFPLENBQUNJLFdBQVIsR0FBc0JBLFdBQXRCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGNoYXJhY3RlcnNfMSA9IHJlcXVpcmUoXCIuL2NoYXJhY3RlcnNcIik7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmNsYXNzIFRleHRCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IFtdO1xuICAgIH1cbiAgICBnZXRUZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5pc0xhc3RXaGl0ZVNwYWNlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudHMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuam9pbignJyk7XG4gICAgfVxuICAgIHNvZnRBcHBlbmRTcGFjZShjb3VudCA9IDEpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNMYXN0V2hpdGVTcGFjZSgpKSB7XG4gICAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudHMucHVzaCgnICcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFwcGVuZCh0ZXh0KSB7XG4gICAgICAgIHRoaXMuc2VnbWVudHMucHVzaCh0ZXh0KTtcbiAgICB9XG4gICAgaXNMYXN0V2hpdGVTcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMubGVuZ3RoID4gMCAmJiB0aGlzLmlzV2hpdGVzcGFjZSh0aGlzLnNlZ21lbnRzW3RoaXMuc2VnbWVudHMubGVuZ3RoIC0gMV0pO1xuICAgIH1cbiAgICBpc1doaXRlc3BhY2Uocykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGlmICghY2hhcmFjdGVyc18xLmlzV2hpdGVTcGFjZShzLmNoYXJDb2RlQXQoaSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuVGV4dEJ1aWxkZXIgPSBUZXh0QnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRleHRCdWlsZGVyLmpzLm1hcCJdfQ==