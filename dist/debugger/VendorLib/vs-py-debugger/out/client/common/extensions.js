"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

/**
 * Split a string using the cr and lf characters and return them as an array.
 * By default lines are trimmed and empty lines are removed.
 * @param {SplitLinesOptions=} splitOptions - Options used for splitting the string.
 */
String.prototype.splitLines = function (splitOptions = {
  removeEmptyEntries: true,
  trim: true
}) {
  let lines = this.split(/\r?\n/g);

  if (splitOptions && splitOptions.trim) {
    lines = lines.map(line => line.trim());
  }

  if (splitOptions && splitOptions.removeEmptyEntries) {
    lines = lines.filter(line => line.length > 0);
  }

  return lines;
};
/**
 * Appropriately formats a string so it can be used as an argument for a command in a shell.
 * E.g. if an argument contains a space, then it will be enclosed within double quotes.
 * @param {String} value.
 */


String.prototype.toCommandArgument = function () {
  if (!this) {
    return this;
  }

  return this.indexOf(' ') >= 0 && !this.startsWith('"') && !this.endsWith('"') ? `"${this}"` : this.toString();
};
/**
 * Appropriately formats a a file path so it can be used as an argument for a command in a shell.
 * E.g. if an argument contains a space, then it will be enclosed within double quotes.
 */


String.prototype.fileToCommandArgument = function () {
  if (!this) {
    return this;
  }

  return this.toCommandArgument().replace(/\\/g, '/');
};
/**
 * Explicitly tells that promise should be run asynchonously.
 */


Promise.prototype.ignoreErrors = function () {
  // tslint:disable-next-line:no-empty
  this.catch(() => {});
};

if (!String.prototype.format) {
  String.prototype.format = function () {
    const args = arguments;
    return this.replace(/{(\d+)}/g, (match, number) => args[number] === undefined ? match : args[number]);
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuc2lvbnMuanMiXSwibmFtZXMiOlsiU3RyaW5nIiwicHJvdG90eXBlIiwic3BsaXRMaW5lcyIsInNwbGl0T3B0aW9ucyIsInJlbW92ZUVtcHR5RW50cmllcyIsInRyaW0iLCJsaW5lcyIsInNwbGl0IiwibWFwIiwibGluZSIsImZpbHRlciIsImxlbmd0aCIsInRvQ29tbWFuZEFyZ3VtZW50IiwiaW5kZXhPZiIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInRvU3RyaW5nIiwiZmlsZVRvQ29tbWFuZEFyZ3VtZW50IiwicmVwbGFjZSIsIlByb21pc2UiLCJpZ25vcmVFcnJvcnMiLCJjYXRjaCIsImZvcm1hdCIsImFyZ3MiLCJhcmd1bWVudHMiLCJtYXRjaCIsIm51bWJlciIsInVuZGVmaW5lZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUEsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxVQUFqQixHQUE4QixVQUFVQyxZQUFZLEdBQUc7QUFBRUMsRUFBQUEsa0JBQWtCLEVBQUUsSUFBdEI7QUFBNEJDLEVBQUFBLElBQUksRUFBRTtBQUFsQyxDQUF6QixFQUFtRTtBQUM3RixNQUFJQyxLQUFLLEdBQUcsS0FBS0MsS0FBTCxDQUFXLFFBQVgsQ0FBWjs7QUFDQSxNQUFJSixZQUFZLElBQUlBLFlBQVksQ0FBQ0UsSUFBakMsRUFBdUM7QUFDbkNDLElBQUFBLEtBQUssR0FBR0EsS0FBSyxDQUFDRSxHQUFOLENBQVVDLElBQUksSUFBSUEsSUFBSSxDQUFDSixJQUFMLEVBQWxCLENBQVI7QUFDSDs7QUFDRCxNQUFJRixZQUFZLElBQUlBLFlBQVksQ0FBQ0Msa0JBQWpDLEVBQXFEO0FBQ2pERSxJQUFBQSxLQUFLLEdBQUdBLEtBQUssQ0FBQ0ksTUFBTixDQUFhRCxJQUFJLElBQUlBLElBQUksQ0FBQ0UsTUFBTCxHQUFjLENBQW5DLENBQVI7QUFDSDs7QUFDRCxTQUFPTCxLQUFQO0FBQ0gsQ0FURDtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBTixNQUFNLENBQUNDLFNBQVAsQ0FBaUJXLGlCQUFqQixHQUFxQyxZQUFZO0FBQzdDLE1BQUksQ0FBQyxJQUFMLEVBQVc7QUFDUCxXQUFPLElBQVA7QUFDSDs7QUFDRCxTQUFRLEtBQUtDLE9BQUwsQ0FBYSxHQUFiLEtBQXFCLENBQXJCLElBQTBCLENBQUMsS0FBS0MsVUFBTCxDQUFnQixHQUFoQixDQUEzQixJQUFtRCxDQUFDLEtBQUtDLFFBQUwsQ0FBYyxHQUFkLENBQXJELEdBQTRFLElBQUcsSUFBSyxHQUFwRixHQUF5RixLQUFLQyxRQUFMLEVBQWhHO0FBQ0gsQ0FMRDtBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQWhCLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQmdCLHFCQUFqQixHQUF5QyxZQUFZO0FBQ2pELE1BQUksQ0FBQyxJQUFMLEVBQVc7QUFDUCxXQUFPLElBQVA7QUFDSDs7QUFDRCxTQUFPLEtBQUtMLGlCQUFMLEdBQXlCTSxPQUF6QixDQUFpQyxLQUFqQyxFQUF3QyxHQUF4QyxDQUFQO0FBQ0gsQ0FMRDtBQU1BO0FBQ0E7QUFDQTs7O0FBQ0FDLE9BQU8sQ0FBQ2xCLFNBQVIsQ0FBa0JtQixZQUFsQixHQUFpQyxZQUFZO0FBQ3pDO0FBQ0EsT0FBS0MsS0FBTCxDQUFXLE1BQU0sQ0FBRyxDQUFwQjtBQUNILENBSEQ7O0FBSUEsSUFBSSxDQUFDckIsTUFBTSxDQUFDQyxTQUFQLENBQWlCcUIsTUFBdEIsRUFBOEI7QUFDMUJ0QixFQUFBQSxNQUFNLENBQUNDLFNBQVAsQ0FBaUJxQixNQUFqQixHQUEwQixZQUFZO0FBQ2xDLFVBQU1DLElBQUksR0FBR0MsU0FBYjtBQUNBLFdBQU8sS0FBS04sT0FBTCxDQUFhLFVBQWIsRUFBeUIsQ0FBQ08sS0FBRCxFQUFRQyxNQUFSLEtBQW1CSCxJQUFJLENBQUNHLE1BQUQsQ0FBSixLQUFpQkMsU0FBakIsR0FBNkJGLEtBQTdCLEdBQXFDRixJQUFJLENBQUNHLE1BQUQsQ0FBckYsQ0FBUDtBQUNILEdBSEQ7QUFJSCIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuLyoqXG4gKiBTcGxpdCBhIHN0cmluZyB1c2luZyB0aGUgY3IgYW5kIGxmIGNoYXJhY3RlcnMgYW5kIHJldHVybiB0aGVtIGFzIGFuIGFycmF5LlxuICogQnkgZGVmYXVsdCBsaW5lcyBhcmUgdHJpbW1lZCBhbmQgZW1wdHkgbGluZXMgYXJlIHJlbW92ZWQuXG4gKiBAcGFyYW0ge1NwbGl0TGluZXNPcHRpb25zPX0gc3BsaXRPcHRpb25zIC0gT3B0aW9ucyB1c2VkIGZvciBzcGxpdHRpbmcgdGhlIHN0cmluZy5cbiAqL1xuU3RyaW5nLnByb3RvdHlwZS5zcGxpdExpbmVzID0gZnVuY3Rpb24gKHNwbGl0T3B0aW9ucyA9IHsgcmVtb3ZlRW1wdHlFbnRyaWVzOiB0cnVlLCB0cmltOiB0cnVlIH0pIHtcbiAgICBsZXQgbGluZXMgPSB0aGlzLnNwbGl0KC9cXHI/XFxuL2cpO1xuICAgIGlmIChzcGxpdE9wdGlvbnMgJiYgc3BsaXRPcHRpb25zLnRyaW0pIHtcbiAgICAgICAgbGluZXMgPSBsaW5lcy5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSk7XG4gICAgfVxuICAgIGlmIChzcGxpdE9wdGlvbnMgJiYgc3BsaXRPcHRpb25zLnJlbW92ZUVtcHR5RW50cmllcykge1xuICAgICAgICBsaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IGxpbmUubGVuZ3RoID4gMCk7XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbn07XG4vKipcbiAqIEFwcHJvcHJpYXRlbHkgZm9ybWF0cyBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBhcyBhbiBhcmd1bWVudCBmb3IgYSBjb21tYW5kIGluIGEgc2hlbGwuXG4gKiBFLmcuIGlmIGFuIGFyZ3VtZW50IGNvbnRhaW5zIGEgc3BhY2UsIHRoZW4gaXQgd2lsbCBiZSBlbmNsb3NlZCB3aXRoaW4gZG91YmxlIHF1b3Rlcy5cbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZS5cbiAqL1xuU3RyaW5nLnByb3RvdHlwZS50b0NvbW1hbmRBcmd1bWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiAodGhpcy5pbmRleE9mKCcgJykgPj0gMCAmJiAhdGhpcy5zdGFydHNXaXRoKCdcIicpICYmICF0aGlzLmVuZHNXaXRoKCdcIicpKSA/IGBcIiR7dGhpc31cImAgOiB0aGlzLnRvU3RyaW5nKCk7XG59O1xuLyoqXG4gKiBBcHByb3ByaWF0ZWx5IGZvcm1hdHMgYSBhIGZpbGUgcGF0aCBzbyBpdCBjYW4gYmUgdXNlZCBhcyBhbiBhcmd1bWVudCBmb3IgYSBjb21tYW5kIGluIGEgc2hlbGwuXG4gKiBFLmcuIGlmIGFuIGFyZ3VtZW50IGNvbnRhaW5zIGEgc3BhY2UsIHRoZW4gaXQgd2lsbCBiZSBlbmNsb3NlZCB3aXRoaW4gZG91YmxlIHF1b3Rlcy5cbiAqL1xuU3RyaW5nLnByb3RvdHlwZS5maWxlVG9Db21tYW5kQXJndW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50b0NvbW1hbmRBcmd1bWVudCgpLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbn07XG4vKipcbiAqIEV4cGxpY2l0bHkgdGVsbHMgdGhhdCBwcm9taXNlIHNob3VsZCBiZSBydW4gYXN5bmNob25vdXNseS5cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUuaWdub3JlRXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1lbXB0eVxuICAgIHRoaXMuY2F0Y2goKCkgPT4geyB9KTtcbn07XG5pZiAoIVN0cmluZy5wcm90b3R5cGUuZm9ybWF0KSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL3soXFxkKyl9L2csIChtYXRjaCwgbnVtYmVyKSA9PiBhcmdzW251bWJlcl0gPT09IHVuZGVmaW5lZCA/IG1hdGNoIDogYXJnc1tudW1iZXJdKTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXh0ZW5zaW9ucy5qcy5tYXAiXX0=