// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

const semver = require("semver");

function parseVersion(raw) {
  raw = raw.replace(/\.00*(?=[1-9]|0\.)/, '.');
  const ver = semver.coerce(raw);

  if (ver === null || !semver.valid(ver)) {
    // tslint:disable-next-line: no-suspicious-comment
    // TODO: Raise an exception instead?
    return new semver.SemVer('0.0.0');
  }

  return ver;
}

exports.parseVersion = parseVersion;

function convertToSemver(version) {
  const versionParts = (version || '').split('.').filter(item => item.length > 0);

  while (versionParts.length < 3) {
    versionParts.push('0');
  }

  return versionParts.join('.');
}

exports.convertToSemver = convertToSemver;

function compareVersion(versionA, versionB) {
  try {
    versionA = convertToSemver(versionA);
    versionB = convertToSemver(versionB);
    return semver.gt(versionA, versionB) ? 1 : 0;
  } catch (_a) {
    return 0;
  }
}

exports.compareVersion = compareVersion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlcnNpb24uanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJzZW12ZXIiLCJyZXF1aXJlIiwicGFyc2VWZXJzaW9uIiwicmF3IiwicmVwbGFjZSIsInZlciIsImNvZXJjZSIsInZhbGlkIiwiU2VtVmVyIiwiY29udmVydFRvU2VtdmVyIiwidmVyc2lvbiIsInZlcnNpb25QYXJ0cyIsInNwbGl0IiwiZmlsdGVyIiwiaXRlbSIsImxlbmd0aCIsInB1c2giLCJqb2luIiwiY29tcGFyZVZlcnNpb24iLCJ2ZXJzaW9uQSIsInZlcnNpb25CIiwiZ3QiLCJfYSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUNBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQUVDLEVBQUFBLEtBQUssRUFBRTtBQUFULENBQTdDOztBQUNBLE1BQU1DLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBdEI7O0FBQ0EsU0FBU0MsWUFBVCxDQUFzQkMsR0FBdEIsRUFBMkI7QUFDdkJBLEVBQUFBLEdBQUcsR0FBR0EsR0FBRyxDQUFDQyxPQUFKLENBQVksb0JBQVosRUFBa0MsR0FBbEMsQ0FBTjtBQUNBLFFBQU1DLEdBQUcsR0FBR0wsTUFBTSxDQUFDTSxNQUFQLENBQWNILEdBQWQsQ0FBWjs7QUFDQSxNQUFJRSxHQUFHLEtBQUssSUFBUixJQUFnQixDQUFDTCxNQUFNLENBQUNPLEtBQVAsQ0FBYUYsR0FBYixDQUFyQixFQUF3QztBQUNwQztBQUNBO0FBQ0EsV0FBTyxJQUFJTCxNQUFNLENBQUNRLE1BQVgsQ0FBa0IsT0FBbEIsQ0FBUDtBQUNIOztBQUNELFNBQU9ILEdBQVA7QUFDSDs7QUFDRFAsT0FBTyxDQUFDSSxZQUFSLEdBQXVCQSxZQUF2Qjs7QUFDQSxTQUFTTyxlQUFULENBQXlCQyxPQUF6QixFQUFrQztBQUM5QixRQUFNQyxZQUFZLEdBQUcsQ0FBQ0QsT0FBTyxJQUFJLEVBQVosRUFBZ0JFLEtBQWhCLENBQXNCLEdBQXRCLEVBQTJCQyxNQUEzQixDQUFrQ0MsSUFBSSxJQUFJQSxJQUFJLENBQUNDLE1BQUwsR0FBYyxDQUF4RCxDQUFyQjs7QUFDQSxTQUFPSixZQUFZLENBQUNJLE1BQWIsR0FBc0IsQ0FBN0IsRUFBZ0M7QUFDNUJKLElBQUFBLFlBQVksQ0FBQ0ssSUFBYixDQUFrQixHQUFsQjtBQUNIOztBQUNELFNBQU9MLFlBQVksQ0FBQ00sSUFBYixDQUFrQixHQUFsQixDQUFQO0FBQ0g7O0FBQ0RuQixPQUFPLENBQUNXLGVBQVIsR0FBMEJBLGVBQTFCOztBQUNBLFNBQVNTLGNBQVQsQ0FBd0JDLFFBQXhCLEVBQWtDQyxRQUFsQyxFQUE0QztBQUN4QyxNQUFJO0FBQ0FELElBQUFBLFFBQVEsR0FBR1YsZUFBZSxDQUFDVSxRQUFELENBQTFCO0FBQ0FDLElBQUFBLFFBQVEsR0FBR1gsZUFBZSxDQUFDVyxRQUFELENBQTFCO0FBQ0EsV0FBT3BCLE1BQU0sQ0FBQ3FCLEVBQVAsQ0FBVUYsUUFBVixFQUFvQkMsUUFBcEIsSUFBZ0MsQ0FBaEMsR0FBb0MsQ0FBM0M7QUFDSCxHQUpELENBS0EsT0FBT0UsRUFBUCxFQUFXO0FBQ1AsV0FBTyxDQUFQO0FBQ0g7QUFDSjs7QUFDRHhCLE9BQU8sQ0FBQ29CLGNBQVIsR0FBeUJBLGNBQXpCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4ndXNlIHN0cmljdCc7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBzZW12ZXIgPSByZXF1aXJlKFwic2VtdmVyXCIpO1xuZnVuY3Rpb24gcGFyc2VWZXJzaW9uKHJhdykge1xuICAgIHJhdyA9IHJhdy5yZXBsYWNlKC9cXC4wMCooPz1bMS05XXwwXFwuKS8sICcuJyk7XG4gICAgY29uc3QgdmVyID0gc2VtdmVyLmNvZXJjZShyYXcpO1xuICAgIGlmICh2ZXIgPT09IG51bGwgfHwgIXNlbXZlci52YWxpZCh2ZXIpKSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tc3VzcGljaW91cy1jb21tZW50XG4gICAgICAgIC8vIFRPRE86IFJhaXNlIGFuIGV4Y2VwdGlvbiBpbnN0ZWFkP1xuICAgICAgICByZXR1cm4gbmV3IHNlbXZlci5TZW1WZXIoJzAuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiB2ZXI7XG59XG5leHBvcnRzLnBhcnNlVmVyc2lvbiA9IHBhcnNlVmVyc2lvbjtcbmZ1bmN0aW9uIGNvbnZlcnRUb1NlbXZlcih2ZXJzaW9uKSB7XG4gICAgY29uc3QgdmVyc2lvblBhcnRzID0gKHZlcnNpb24gfHwgJycpLnNwbGl0KCcuJykuZmlsdGVyKGl0ZW0gPT4gaXRlbS5sZW5ndGggPiAwKTtcbiAgICB3aGlsZSAodmVyc2lvblBhcnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgdmVyc2lvblBhcnRzLnB1c2goJzAnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnNpb25QYXJ0cy5qb2luKCcuJyk7XG59XG5leHBvcnRzLmNvbnZlcnRUb1NlbXZlciA9IGNvbnZlcnRUb1NlbXZlcjtcbmZ1bmN0aW9uIGNvbXBhcmVWZXJzaW9uKHZlcnNpb25BLCB2ZXJzaW9uQikge1xuICAgIHRyeSB7XG4gICAgICAgIHZlcnNpb25BID0gY29udmVydFRvU2VtdmVyKHZlcnNpb25BKTtcbiAgICAgICAgdmVyc2lvbkIgPSBjb252ZXJ0VG9TZW12ZXIodmVyc2lvbkIpO1xuICAgICAgICByZXR1cm4gc2VtdmVyLmd0KHZlcnNpb25BLCB2ZXJzaW9uQikgPyAxIDogMDtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbmV4cG9ydHMuY29tcGFyZVZlcnNpb24gPSBjb21wYXJlVmVyc2lvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIl19